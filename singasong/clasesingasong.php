<?
session_start();
date_default_timezone_set("America/Lima");
header("Content-Type: text/html; charset=iso-8859-1");
//CREATE TABLE IF NOT EXISTS singasong ( singasong 			int(11) NOT NULL AUTO_INCREMENT, 	fecha 					varchar(200) NOT NULL, 	ip 							varchar(200) NOT NULL, 	cadena 					text NOT NULL, 	PRIMARY KEY (singasong) ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
$_servidor="localhost";
$_usuario="root";
$_clave="";
$_bd="ech";
// $_usuario="perummco_ech";
// $_clave="gtryonp";
// $_bd="perummco_ech";
$cn=mysqli_connect($_servidor,$_usuario,$_clave) or die (mysqli_error($cn));
mysqli_select_db($cn,$_bd);
mysqli_set_charset($cn,'utf8');
/*___ if($_POST['modo']=="grabar" || $_GET['modo']=="grabar")	{ ______________________________________________________________________________________________________________________________________________________________________________________________________________________________	*/
if($_POST['modo']=="grabar" || $_GET['modo']=="grabar")	{
	$_POST['fecha']=date("Y-m-d H:i:s",time());
	$_POST['ip']=getUserIP();
	$cadena="insert into singasong (fecha,ip,email,cadena) values ('".$_POST['fecha']."','".$_POST['ip']."','".$_POST['email']."','".str_replace("'","",$_POST['cadena'])."'	)	"	;	
	$rs=mysqli_query($cn,$cadena)  or die(@file_put_contents("log_".date("Ymd",time()).".err", chr(13).chr(10)."[".date("H:i:s",time())."][".strtoupper(__FUNCTION__."-".$_POST['modo'])."]-->".$cadena." -> ".mysqli_error($cn), FILE_APPEND | LOCK_EX));
	$singasong= $cn -> insert_id;
	if($_POST['email']!="")	{
		require_once("../libreria/class.phpmailer.php");
		$mail             = new PHPMailer(true);
		// $body="<body> Here is the link to your song:<a href='https://ech.lat.pe/singasong/?singasong=".$singasong."'> to share. Click here and press 'Play your song!'</a> <br/><a href='https://ech.lat.pe'><img src='data:image/png;base64,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'></a><br/>English Club House - English the fun way!</body>";
		// $body="<body> Here is the link to your song:<a href='https://ech.lat.pe/singasong/?singasong=".$singasong."'> to share. Click here and press 'Play your song!'</a> <br/><a href='https://ech.lat.pe'><img src='data:image/jpeg;base64,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		'></a><br/>English Club House - English the fun way!</body>";		
		// $body="<body> Here is the link to your song:<a href='https://ech.lat.pe/singasong/?singasong=".$singasong."'> to share. Click here and press 'Play your song!'</a> <br/><a href='https://ech.lat.pe'><img src='https://ech.lat.pe/images/mini.jpg'></a><br/>English ClubHouse - English the fun way!</body>";
		$body="<body> Here is the link to your song:<a href='https://ech.lat.pe/singasong/?singasong=".$singasong."'> to share. Click here and press 'Play your song!'</a> <br/><a href='https://ech.lat.pe'>English ClubHouse</a><br/>English the fun way!</body>";
		$mail->IsSMTP();
		// $mail->SMTPDebug  = 2;
		$mail->SMTPAuth   = true;
		$mail->Host       = "mail.myenglishclubhouse.com";
		$mail->Port       = 26;
		$mail->Username   = "ech@myenglishclubhouse.com";  
		$mail->Password   = "gtryonp";
		$mail->From       = "ech@myenglishclubhouse.com";
		$mail->FromName   = "English CLubHouse";
		$mail->Subject    = "SingaSong just send you a song!";
		$mail->WordWrap   = 50;
		$mail->MsgHTML($body);
		$mail->AddAddress($_POST['email'], "English CLubHouse");
		$mail->IsHTML(true);
		$mail->Send();
	}
}
/*___ if($_POST['modo']=="grabar" || $_GET['modo']=="grabar")	{ ______________________________________________________________________________________________________________________________________________________________________________________________________________________________	*/
if($_POST['modo']=="obtener" || $_GET['modo']=="obtener")	{
	$cadena="select cadena from singasong where singasong='".$_POST["singasong"]."' limit 1";	
	$rs=mysqli_query($cn,$cadena)  or die(@file_put_contents("log_".date("Ymd",time()).".err", chr(13).chr(10)."[".date("H:i:s",time())."][".strtoupper(__FUNCTION__."-".$_POST['modo'])."]-->".$cadena." -> ".mysqli_error($cn), FILE_APPEND | LOCK_EX));
	while($r = mysqli_fetch_assoc($rs)) {
		echo $r['cadena'];
	}
}
/*___ function getUserIP()	{ ______________________________________________________________________________________________________________________________________________________________________________________________________________________________	*/
function getUserIP()	{
	if (isset($_SERVER["HTTP_CF_CONNECTING_IP"])) {
		$_SERVER['REMOTE_ADDR'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
		$_SERVER['HTTP_CLIENT_IP'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
	}
	$client  = @$_SERVER['HTTP_CLIENT_IP'];
	$forward = @$_SERVER['HTTP_X_FORWARDED_FOR'];
	$remote  = $_SERVER['REMOTE_ADDR'];
	if(filter_var($client, FILTER_VALIDATE_IP))	{
		$ip = $client;
	}	elseif(filter_var($forward, FILTER_VALIDATE_IP))	{
		$ip = $forward;
	}	else	{
		$ip = $remote;
	}
	return $ip;
}
?>